using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using MindFit_Intelligence_Backend.Services;
using MindFit_Intelligence_Backend.DTOs.Personas;

namespace MindFit_Intelligence_Backend.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class PersonaResponsableController : ControllerBase
    {
        private IPersonaService<PersonaResponsableDto> _PersonaResponsableService;
        // falta validaciones con FluentValidation (falta instalar)

        public PersonaResponsableController(IPersonaService<PersonaResponsableDto> PersonaResponsableService) 
        {
                _PersonaResponsableService = PersonaResponsableService;
        }

        // Front: Por si se quiere mostrar una lista de SOLO responsables, pero probablemente no se haga o se muestre con UsuariosController
        [HttpGet]
        public async Task<IEnumerable<PersonaResponsableDto>> Get()
        {
           IEnumerable<PersonaResponsableDto> PersonaResponsable = await _PersonaResponsableService.Get();

            return PersonaResponsable;
        }

        // Front : Para mostrar el detalle de un responsable, pero probablemente no se haga o se muestre con UsuariosController
        [HttpGet("{id}")]
        public async Task<ActionResult<PersonaResponsableDto>> GetById(int id)
        {
            PersonaResponsableDto? PersonaResponsableDto = await _PersonaResponsableService.GetById(id);

            return PersonaResponsableDto == null
                ? NotFound() // 404 Not Found
                : Ok(PersonaResponsableDto); // 200 OK
        }
    }
}
